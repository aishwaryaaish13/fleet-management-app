<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
</head>
<body>
    <h2> Fleet Dashboard</h2>
    <div class="navbar">
        <select id="filter-category" onchange="applyFilters()">
            <option >All</option>
            <option >Trucks</option>
            <option>Auto</option>
            <option>Bus</option>
            <option>car</option>

        </select>
        <select id="filterAvail"onchange="applyFilters()">
            <option >All</option>
            <option >Available</option>
            <option>Unavailable</option>

        </select>
        <button onclick="clearFilter()">Clear Filters  </button>

    </div>
    <div class="container">
        <div class="sidebar">
            <h3> Add Fleet</h3>
            <input type="text"id="reg"placeholder="Registration Number"/>
            <select id="catrgory">
                <option>Auto</option>
                <option>Bus</option>
                <option>Car</option>
                <option>Truck</option>
            </select>
            <input type="text" id="driver"placeholder="Driver Name"/>
            <select id="available">
                <option>Available</option>
                <option>Unavailable</option>
            </select>
            <button onclick="addFleet()">Add Fleet</button>
        </div>
        <div class="cards" id="cardArea"></div>
    </div>
    <script >
        let fleetData=[];
        function addFleet()
{
    let r=document.getElementById("reg").value;
    let c=document.getElementById("catrgory").value;
    let d=document.getElementById("driver").value;
    let a=document.getElementById("available").value;
    if(r===""||d==="")
{
    alert("Please fill all fields");
    return;
}
let obj={
    id:Date.now(),
    reg:r,
    category:c,
    driver:d,
    available:a
}
fleetData.push(obj);
renderCards(fleetData);
document.getElementById("reg").value="";
document.getElementById("driver").value="";
}  
function renderCards(data){
    let area=document.getElementById("cardArea");
    area.innerHTML="";
    data.forEach(f=>{
        let div=document.createElement("div");
        div.className="card";
        div.innerHTML=`
        <img src="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png" alt="Vehicle Image"/>
        <p><b>Registration:</b> ${f.reg}</p>
        <p><b>Category:</b> ${f.category}</p>
        <p><b>Driver:</b> ${f.driver}</p>
        <p><b>Status:</b> ${f.available}</p>
        <button onclick="UpdateDriver(${f.id})">Update Driver</button>
        <button onclick="changeAvail(${f.id})">Change Availability</button>
        <button onclick="deleteFleet(${f.id})">Delete</button>
        `;
        area.appendChild(div);
    })
}
function updateDriver(id){
    let newName=prompt("Enter new driver name:");
    if(!newName||newName.trim()==="")
    {
        alert("Driver name cannot be empty");
        return;
    }
    fleetData=fleetData.map(f=>{
        if(f.id===id){
            f.driver=newName;
        }
        return f;
    });
    applyFilters();
}
function changeAvail(id){
    fleetData=fleetData.map(f=>{
        if(f.id===id){
            f.available=f.available==="Available"?"Unavailable":"Available";
        }
        return f;
    });
    applyFilters();
}
function deleteFleet(id){
    fleetData=fleetData.filter(f=>f.id!==id);
    applyFilters();
}
function applyFilters(){
    let category=document.getElementById("filter-category").value;
    let avail=document.getElementById("filterAvail").value;
    let filteredData=fleetData;
    if(category!=="All"){
        filteredData=filteredData.filter(f=>f.category===category);
    }
    if(avail!=="All"){
        filteredData=filteredData.filter(f=>f.available===avail);
    }
    renderCards(filteredData);
}
function clearFilter(){
    document.getElementById("filter-category").value="All";
    document.getElementById("filterAvail").value="All";
    renderCards(fleetData);
}

</script>
</body>
</html>